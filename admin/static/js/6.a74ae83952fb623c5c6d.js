webpackJsonp([6],{Qzuo:function(e,t){},h5wU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("Xxa5"),r=a.n(o),s=a("//Fk"),i=a.n(s),n=a("exGp"),l=a.n(n),m=a("mtWM"),p=a.n(m),c={name:"moduleDetail",props:{isEdit:{type:Boolean,default:!1}},data:function(){return{postForm:{fileName:"",type:"",createTime:"",preRelationViewUrl:""},status:[{value:"TRUE",title:"TRUE"},{value:"FALSE",title:"FALSE"}],doUploadUrl:"",doUploadData:{id:""}}},created:function(){this.doUploadUrl=this.api.addResourceFile},watch:{},methods:{getResourceFileDetailByFileName:function(e){var t=this;t.$http.get(t.api.getResourceFileDetailByFileName,{params:{fileName:e}},function(e){t.postForm=e.content},function(e){})},beforeUpload:function(e){var t=this;return l()(r.a.mark(function a(){var o,s,n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=e.name,s=t,n=!0,a.next=5,p.a.get(s.api.existResourceFileByName,{params:{fileName:o}}).then(function(e){var t=e.data;console.log(t),0==t.code?1==t.content?(n=!1,console.log("文件已存在"),s.$message({type:"warning",message:"文件已经存在，请先删除",duration:2e3})):console.log("文件不存在"):alert(t.msg)}).catch(function(e){s.$message({type:"warning",message:"请求异常",duration:1e3})});case 5:return a.abrupt("return",new i.a(function(e,t){return 1==n?e(!0):t(!1)}));case 6:case"end":return a.stop()}},a,t)}))()},routerToList:function(){window.open("#/ResourceManagerList","_self")},existResourceFileByName:function(e){var t=this;t.$http.get(t.api.existResourceFileByName,{params:{fileName:e}},function(e){if(0==e.code)return e.content;t.$message({type:"warning",message:"请求异常",duration:1e3})},function(e){})},onSuccess:function(e,t,a){0==e.code&&1==e.content?this.$message({type:"success",message:"上传成功",duration:500}):this.$message({type:"warning",message:"请求异常",duration:500});var o=t.name;this.getResourceFileDetailByFileName(o)}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-form mt20 ml40"},[a("h5",{staticClass:"form-tit"},[e._v("资源添加")]),e._v(" "),a("section",[a("el-form",{ref:"postForm",attrs:{model:e.postForm,rules:e.rules,"label-width":"180px",size:"mini","inline-message":!0}},[a("div",{staticClass:"mt30 ml15"},[a("el-form-item",{attrs:{label:"文件名称："}},[a("el-input",{attrs:{maxlength:"100",disabled:!0},model:{value:e.postForm.fileName,callback:function(t){e.$set(e.postForm,"fileName",t)},expression:"postForm.fileName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文件类型："}},[a("el-input",{attrs:{maxlength:"100",disabled:!0},model:{value:e.postForm.type,callback:function(t){e.$set(e.postForm,"type",t)},expression:"postForm.type"}})],1),e._v(" "),a("el-upload",{staticClass:"upload-file",attrs:{drag:"",limit:1,action:e.doUploadUrl,data:e.doUploadData,"before-upload":e.beforeUpload,"on-success":e.onSuccess}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])])]),e._v(" "),a("el-form-item",{attrs:{label:"文件时间："}},[a("el-input",{attrs:{maxlength:"100",disabled:!0},model:{value:e.postForm.createTime,callback:function(t){e.$set(e.postForm,"createTime",t)},expression:"postForm.createTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文件预览(目前支持pdf,png,jpg)："}},[a("el-input",{attrs:{maxlength:"100",disabled:!0},model:{value:e.postForm.preRelationViewUrl,callback:function(t){e.$set(e.postForm,"preRelationViewUrl",t)},expression:"postForm.preRelationViewUrl"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.downloadByFileName(e.postForm.downloadUrl)}}},[e._v("下载")]),e._v(" "),".jpg"==e.postForm.type||".png"==e.postForm.type?a("iframe",{attrs:{src:e.postForm.preRelationViewUrl,frameborder:"0",width:"100%",id:"iFrame1",name:"iFrame1",onload:"this.height=iFrame1.document.body.scrollHeight"}},[a("p",[e._v("Your browser does not support iframes.")])]):".pdf"==e.postForm.type?a("iframe",{attrs:{src:e.postForm.preRelationViewUrl,frameborder:"0",width:"100%",id:"iFrame2",name:"iFrame2",height:"800px"}},[a("p",[e._v("Your browser does not support iframes.")])]):e._e()],1)],1)])],1),e._v(" "),a("div",{staticClass:"mt40 ml40"},[a("el-button",{on:{click:function(t){return e.routerToList()}}},[e._v("返回list")])],1)])},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("Qzuo")},null,null);t.default=d.exports}});